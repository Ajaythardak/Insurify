<div style="position:absolute">

  <mat-stepper #stepper>
    <mat-step [stepControl]="insuranceForms">
      <mat-card class="singlecard">
        <mat-card-content style="align-content: center;">
          <form [formGroup]="insuranceForms">
            <ng-template matStepLabel>Enter Basic Policy Details</ng-template>
            <mat-form-field appearance="outline" style="margin-left: 50px;width: 100px;">
              <mat-label>Policy Id</mat-label>
              <input matInput placeholder="Policy Id" formControlName="policyId" required style="text-align: center;">
            </mat-form-field>
            <mat-form-field style="margin-left: 20px;" appearance="outline">
              <mat-label>Insurance Type</mat-label>
              <mat-select placeholder="Insurance Category" formControlName="insuranceType">
                <mat-option value="LifeInsurance">Life Insurance</mat-option>
                <mat-option value="HealthInsurance">Health Insurance</mat-option>
                <mat-option value="AutoMobileInsurance">AutoMobile Insurance</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" style="margin-left: 50px;">
              <mat-label>Policy Name</mat-label>
              <input matInput placeholder="Policy Name " formControlName="policyName" required>
            </mat-form-field>
            <mat-form-field appearance="outline" style="width:90%;">
              <mat-label>Policy Description</mat-label>
              <textarea formControlName="policyDescription" matInput placeholder="Policy Description"
                type="text"></textarea>
            </mat-form-field>
            
            <div formArrayName="policyBenefits">
              <h3>Enter various Policy Benefits</h3>
              <div *ngFor="let child of policyBenefitsx;let i=index" formGroupName="{{i}}">
                <mat-form-field style="margin-left: 20px;" appearance="outline">
                  <mat-label>Benefit</mat-label>
                  <input matInput placeholder="Benefit" type="text" formControlName="brief">
                </mat-form-field>
                <mat-form-field style="margin-left: 20px;width: 50%;" appearance="outline">
                  <mat-label>Description</mat-label>
                  <input matInput placeholder="Benefit" type="text" formControlName="description">
                </mat-form-field>

                <a mat-raised-button (click)="removeDetails1(i)" style="margin-left: 30px;">Remove</a>
              </div>
              <div>
                <a mat-raised-button color="primary" (click)="addDetails1()" style="margin-left: 45%;"> + Add</a>
              </div>
            </div>
            
          </form>
        </mat-card-content>
        <mat-card-actions class="buttonplace">
          <button mat-raised-button matStepperPrevious color="accent">Back</button>
          <button mat-raised-button matStepperNext color="primary" style="margin-left: 20px;">Next</button>
        </mat-card-actions>
      </mat-card>
    </mat-step>

    <mat-step [stepControl]="insuranceForms">
      <mat-card class="singlecard">
        <mat-card-content style="align-content: center;">
          <form [formGroup]="insuranceForms">
            <ng-template matStepLabel>Enter Policy Benefits</ng-template>
            <mat-form-field class="example-chip-list" appearance="outline">
              <mat-label>Allowed Sum Insured Values(Add new values below)</mat-label>
              <mat-chip-list #chipList aria-label="Fruit selection" matTooltip="To add new Sum Insured values ,add the value and press Enter">
                <mat-chip *ngFor="let fruit of fruits" (removed)="remove(fruit)">
                  {{fruit.insuredSum}}
                  <button matChipRemove>
                    <mat-icon>cancel</mat-icon>
                  </button>
                </mat-chip>
                <input placeholder="Add New Insured Sum..." [matChipInputFor]="chipList"
                  [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                  (matChipInputTokenEnd)="add($event)">
              </mat-chip-list>
            </mat-form-field>
            <mat-form-field class="example-chip-list" appearance="outline" style="margin-left: 5%;">
              <mat-label>Allowed Duration Values in Years(Add new values below)</mat-label>
              <mat-chip-list #chipList1 matTooltip="You can add values to be available for policy duration here">
                <mat-chip *ngFor="let x of duration" (removed)="removeduration(x)">
                  {{x.years}}
                  <button matChipRemove>
                    <mat-icon>cancel</mat-icon>
                  </button>
                </mat-chip>
                <input placeholder="Add New Duration..." [matChipInputFor]="chipList1"
                  [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                  (matChipInputTokenEnd)="addduration($event)">
              </mat-chip-list>
            </mat-form-field>
            <div formArrayName="policyDetails">
              <div *ngFor="let child of policyDetailsx;let i=index" formGroupName="{{i}}">
                <mat-form-field style="margin-left: 20px;width: 150px;" appearance="outline">
                  <!-- <mat-label>Sum Insured</mat-label>
                <input matInput placeholder="Sum Insured" type="number" formControlName="sumInsure"> -->
                  <mat-label>Sum Insured</mat-label>
                  <mat-select placeholder="Sum Insured" formControlName="sumInsure" type="number">
                    <div *ngFor="let x of fruits">
                      <mat-option value="{{x.insuredSum}}">{{x.insuredSum}}</mat-option>
                    </div>
                  </mat-select>
                </mat-form-field>
                <mat-form-field style="margin-left: 20px;width: 150px;" appearance="outline">
                  <mat-label>Policy Duration </mat-label>
                  <!-- <input formControlName="durations" matInput placeholder="Policy Duration" type="number"> -->
                  <mat-select placeholder="policy Duration" formControlName="durations" type="number">
                    <div *ngFor="let x of duration">
                      <mat-option value="{{x.years}}">{{x.years}}</mat-option>
                    </div>
                  </mat-select>
                </mat-form-field>
                <mat-form-field style="margin-left: 20px;width: 150px;" *ngIf="insurancex!='HealthInsurance'"
                  appearance="outline">
                  <mat-label>Policy Premium </mat-label>
                  <input formControlName="premiums" matInput placeholder="Policy Premium" type="number">
                </mat-form-field>
                <mat-form-field style="margin-left: 20px;width: 150px;" appearance="outline"
                  *ngIf="insurancex==='HealthInsurance'">
                  <mat-label>Adults Premium</mat-label>
                  <input formControlName="adults" matInput placeholder="Adults Premium" type="number">
                </mat-form-field>
                <mat-form-field style="margin-left: 20px;width: 150px;" appearance="outline"
                  *ngIf="insurancex==='HealthInsurance'">
                  <mat-label>Kids Premium</mat-label>
                  <input formControlName="kids" matInput placeholder="Kids Premium" type="number">
                </mat-form-field>
                <mat-form-field style="margin-left: 20px;width: 150px;" appearance="outline"
                  *ngIf="insurancex==='LifeInsurance'">
                  <mat-label>Minimum Salary</mat-label>
                  <input formControlName="minSalary" matInput placeholder="Min Salary" type="number">
                </mat-form-field>
                <mat-form-field style="margin-left: 20px;width: 150px;" appearance="outline"
                  *ngIf="insurancex==='LifeInsurance'">
                  <mat-label>Maximum Salary</mat-label>
                  <input formControlName="maxSalary" matInput placeholder="Max Salary" type="number">
                </mat-form-field>
                <a mat-raised-button (click)="removeDetails(i)" style="margin-left: 30px;" color="warn">-</a>
                <a mat-raised-button (click)="addDetails(i)" style="margin-left: 30px;" color="accent">+</a>
              </div>
              <div>
                <a mat-raised-button color="primary" (click)="addDetailsE()" style="margin-left: 45%;"> + Add</a>
              </div>
            </div>
          </form>
        </mat-card-content>
        <mat-card-actions class="buttonplace">
          <button mat-raised-button matStepperPrevious color="accent">Back</button>
          <button mat-raised-button matStepperNext color="primary" style="margin-left: 20px;">Next</button>
        </mat-card-actions>
      </mat-card>
    </mat-step>
    <mat-step [stepControl]="insuranceForms">
      <mat-card class="singlecard">
        <mat-card-content style="align-content: center;">
          <form [formGroup]="insuranceForms">
            <ng-template matStepLabel>Enter Additional Details</ng-template>
            <div formArrayName="addOnDetails">
              <div *ngFor="let child of policyAddOnsx;let i=index" formGroupName="{{i}}">
                <mat-form-field style="margin-left: 20px;width: 40%;" appearance="outline">
                  <mat-label>Enter Add On </mat-label>
                  <input matInput placeholder="Enter Add On" type="text" formControlName="addOn">
                </mat-form-field>
                <mat-form-field style="margin-left: 20px;" appearance="outline">
                  <mat-label>Enter Add On Premium</mat-label>
                  <input matInput placeholder="Add On Premium" type="number" formControlName="addOnPremiums">
                </mat-form-field>

                <a mat-raised-button (click)="removeDetails2(i)" style="margin-left: 30px;">Remove</a>
              </div>
              <div>
                <a mat-raised-button color="primary" (click)="addDetails2()" style="margin-left: 45%;"> + Add</a>
              </div>
            </div>
          </form>
        </mat-card-content>
        <mat-card-actions class="buttonplace">
          <button mat-raised-button matStepperPrevious color="accent">Back</button>
          <button mat-raised-button matStepperNext color="primary" style="margin-left: 20px;">Next</button>
        </mat-card-actions>
      </mat-card>
    </mat-step>

    <mat-step [stepControl]="insuranceForms">
      <mat-card class="singlecard">
        <mat-card-content style="align-content: center;">
          <form [formGroup]="insuranceForms" style="margin-left:40%">
            <ng-template matStepLabel>Upload Documents</ng-template>
            <p>Upload Documents</p>
            <input style="margin-top: 5px;" formControlName="policyDocuments" type="file"
              (change)="onFileChanged($event)">
          </form>
          
          <textarea type="text" #searchtext style="width: 80%;"></textarea>
          <div>
          <markdown ngPreserveWhitespaces>
            {{displaytext}}
          </markdown>
        </div>
        </mat-card-content>
        <mat-card-actions>
          <div class="buttonplace">
            <button mat-button matStepperPrevious>Back</button>
            <button mat-raised-button color="primary" style="margin-left: 30px;" (click)="display()">Add policy</button>
            <button mat-button (click)="stepper.reset()" style="margin-left: 30px;">Reset</button>
          </div>
        </mat-card-actions>
      </mat-card>
    </mat-step>
  </mat-stepper>
</div>